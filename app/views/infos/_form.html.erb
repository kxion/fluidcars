<%= form_for @info, html: { class: 'form-newinfo' } do |f| %>
  <h2>出租信息</h2>
  <%= f.hidden_field :car_id, value: @info.car_id %>
  <%= f.hidden_field :price, value: @info.car.price %>
  <div class="control-group">
    <div class="controls input-append date" id="rent_start">
      <%= f.text_field :rent_start %>
      <span class="add-on"><i class="icon-calendar"></i></span>
    </div>
  </div>
  <div class="control-group">
    <div class="controls input-append date" id="rent_end">
      <%= f.text_field :rent_end %>
      <span class="add-on"><i class="icon-calendar"></i></span>
    </div>
  </div>
  <div class="actions">
    <%= f.submit "Rent my car",:class => "btn btn-primary"%>
  </div>
<% end %>
<!-- datetime picker -->
<script type="text/javascript">
  function UTCDate(){
    return new Date(Date.UTC.apply(Date, arguments));
  }
  function UTCToday(){
    var today = new Date();
    return UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate());
  }
  var start = new Date(2013,1,1);
  var end = new Date(2013,1,2);
  $("#rent_start").datepicker({
          format: "yyyy-MM-dd",
          startDate: UTCToday(),
          autoclose: true,
          todayBtn: true,
          todayHighlight: true,
          language: "chs"
          }).on('changeDate', function(ev){
            start = new Date(ev.date);
            $("#rent_end").datepicker('setStartDate', start);
            if (start.valueOf() > end.valueOf()){
              $("#rent_end").datepicker('setDate', start);}
            });

  $("#rent_end").datepicker({
          format: "yyyy-MM-dd",
          autoclose: true,
          todayBtn: true,
          todayHighlight: true,
          language: "chs"
          }).on('changeDate', function(ev){
            end = new Date(ev.date);
            });
  // var endDate = new Date(2012,1,25);
  // $('#rent-start')
  //     .datepicker({
  //       format: "yyyy-MM-dd",
  //       startDate: UTCToday(),
  //       autoclose: true,
  //       todayBtn: true,
  //       language: "chs"
  //       }).on('changeDate', function(ev){
  //         if (ev.date.valueOf() > endDate.valueOf()){
  //             $('#alert').show().find('strong').text('The start date must be before the end date.');
  //         } else {
  //             $('#alert').hide();
  //             startDate = new Date(ev.date);
  //             $('#rent_start-display').text($('#rent_start').data('date'));
  //         }
  //         $('#rent_start').datepicker('hide');
  //     });
  // $('#rent_end')
  //     .datepicker()
  //     .on('changeDate', function(ev){
  //         if (ev.date.valueOf() < startDate.valueOf()){
  //             $('#alert').show().find('strong').text('The end date must be after the start date.');
  //         } else {
  //             $('#alert').hide();
  //             endDate = new Date(ev.date);
  //             $('#rent_end-display').text($('#rent_end').data('date'));
  //         }
  //         $('#rent_end').datepicker('hide');
  //     });
</script>
